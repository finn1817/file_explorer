<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Liquid Glass File Explorer ‚Äî Overview + Simple Demo</title>
		<style>
			:root {
				--bg: #0d0f14;
				--panel: #141821;
				--panel-2: #0e1218;
				--text: #eef2f8;
				--muted: #aab3c2;
				--accent: #5cc8ff;
				--accent-2: #9aa0ff;
				--ok: #34d399;
				--warn: #f59e0b;
				--border: rgba(255,255,255,0.08);
				--border-2: rgba(255,255,255,0.06);
				--btn-bg: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
			}
			html, body { margin:0; padding:0; height:100%; background: radial-gradient(1200px 600px at 20% -10%, rgba(92,200,255,0.08), transparent), radial-gradient(900px 500px at 110% 10%, rgba(154,160,255,0.06), transparent), var(--bg); color:var(--text); font-family: Segoe UI, system-ui, Roboto, Helvetica, Arial, sans-serif; }
			a { color: var(--accent); text-decoration: none; }
			a:hover { text-decoration: underline; }
			.container { max-width: 1280px; margin: 0 auto; padding: 18px 20px; }
			.muted { color: var(--muted); }
			.badge { display:inline-block; padding:2px 6px; border-radius:6px; font-size:12px; border:1px solid var(--border); color: var(--muted); }

			/* Top window bar mimic */
			.windowbar { display:flex; align-items:center; gap:10px; padding: 8px; background: var(--panel); border:1px solid var(--border); border-radius: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.05), 0 10px 30px rgba(0,0,0,0.35); backdrop-filter: blur(6px); }
			.btn { display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:10px; border:1px solid var(--border); background: var(--btn-bg); color:var(--text); cursor:pointer; }
			.btn:hover { border-color: rgba(255,255,255,0.12); }
			.field { flex:1; display:flex; align-items:center; gap:8px; padding: 8px 10px; background: var(--panel-2); color:var(--text); border:1px solid var(--border-2); border-radius:10px; }
			.field input { flex:1; background:transparent; border:0; outline:0; color:var(--text); font-size: 14px; }

			/* Actions toolbar */
			.actions { display:flex; align-items:center; gap:10px; margin-top: 10px; padding: 8px; background: var(--panel); border:1px solid var(--border); border-radius: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.05); }

			/* Layout */
			.layout { display:grid; grid-template-columns: 280px 1fr; gap: 14px; margin-top: 14px; }
			.sidebar { display:flex; flex-direction:column; gap: 12px; }
			.card { background: var(--panel); border:1px solid var(--border); border-radius:12px; padding: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.05); }
			.section-title { font-weight:600; color:var(--muted); margin: 4px 0 10px; }
			.qa-item { display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:10px; border:1px solid var(--border-2); background: var(--panel-2); cursor:pointer; }
			.qa-item:hover { border-color: rgba(255,255,255,0.12); }
			.qa-list { display:flex; flex-direction:column; gap: 8px; }
			.favorites-empty { text-align:center; color:var(--muted); font-style: italic; padding: 18px 6px; }

			/* File view */
			.fileview { background: var(--panel); border:1px solid var(--border); border-radius:12px; overflow:hidden; }
			table { width:100%; border-collapse: collapse; }
			th, td { text-align:left; padding: 10px 12px; border-bottom:1px solid var(--border-2); }
			thead th { color: var(--muted); background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03)); position: sticky; top: 0; backdrop-filter: blur(4px); }
			tr:hover td { background: rgba(255,255,255,0.02); }
			.name { display:flex; align-items:center; gap:10px; }
			.icon { width:18px; height:18px; display:inline-grid; place-items:center; background: #1c212c; border:1px solid var(--border-2); border-radius:6px; font-size:12px; }
			.band { color: var(--warn); }
			@media (max-width: 980px) { .layout { grid-template-columns: 1fr; } }
		</style>
</head>
<body>
	<div class="container">
			<!-- Top title and quick links -->
			<header class="row" style="justify-content:space-between; margin-bottom:10px;">
				<h1 style="font-size:1.25rem; margin:0;">Liquid Glass File Explorer ‚Äî Overview + Simple Demo</h1>
				<nav class="row">
					<a href="schema.html" class="pill">Schema</a>
					<a href="#demo" class="pill">Jump to Demo</a>
				</nav>
			</header>

		<div class="card" style="margin-bottom:16px;">
			<p class="muted">A modern PyQt6 desktop file explorer with:
			</p>
			<ul>
				<li>Fit-to-screen window and movable toolbars</li>
				<li>Explorer-like columns (Name, Size, Type, Date Modified)</li>
				<li>Accurate file size formatting; folder sizes computed async and cached</li>
				<li>Large-size banding: precise below 25 GB; 25+ GB, 50+ GB, 100+ GB above</li>
				<li>Bookmarks and Side Apps (managed folders) + run-on-start</li>
				<li>Search filters within the current folder (no root jump)</li>
				<li>JSON-backed data in <code>app-code/data</code>; no .pyc on disk</li>
			</ul>
			<p class="muted">This page includes a zero-save, browser-only demo that mimics the UI behavior using sample data.</p>
		</div>

			<h2 id="demo" style="margin:12px 0">Simple Demo (no saving)</h2>

			<!-- Navigation toolbar (mimic app) -->
			<div class="windowbar">
				<button class="btn" id="backBtn">‚¨Ö Back</button>
				<button class="btn" id="forwardBtn">‚û° Forward</button>
				<button class="btn" id="upBtn">‚¨Ü Up</button>
				<button class="btn" id="refreshBtn">üîÑ Refresh</button>
				<div class="field" title="Address">
					<span>üìÅ</span>
					<input id="address" type="text" placeholder="C:/Users/you" readonly>
				</div>
				<div class="field" title="Search in current folder">
					<span>üîé</span>
					<input id="search" type="text" placeholder="Search files...">
				</div>
			</div>

			<!-- Actions toolbar (mimic app) -->
			<div class="actions">
				<button class="btn" id="newFolder">üìÅ New Folder</button>
				<button class="btn" id="copyBtn">üìã Copy</button>
				<button class="btn" id="cutBtn">‚úÇÔ∏è Cut</button>
				<button class="btn" id="pasteBtn">üìå Paste</button>
				<button class="btn" id="renameBtn">‚úèÔ∏è Rename</button>
				<button class="btn" id="deleteBtn">üóëÔ∏è Delete</button>
				<button class="btn" id="favBtn">‚≠ê Add to Favorites</button>
			</div>

			<div class="layout">
				<!-- Sidebar mimic -->
				<aside class="sidebar">
					<div class="card">
						<div class="section-title">Quick Access</div>
						<div class="qa-list">
							<div class="qa-item" data-target="Desktop">üñ•Ô∏è Desktop</div>
							<div class="qa-item" data-target="Documents">üìÑ Documents</div>
							<div class="qa-item" data-target="Downloads">‚¨áÔ∏è Downloads</div>
							<div class="qa-item" data-target="Pictures">üñºÔ∏è Pictures</div>
							<div class="qa-item" data-target="Videos">üé¨ Videos</div>
							<div class="qa-item" data-target="Music">üéµ Music</div>
							<div class="qa-item" data-target="Bookmarks">üìë Bookmarks</div>
							<div class="qa-item" data-target="SideApps">üß© Side Apps</div>
						</div>
					</div>
					<div class="card">
						<div class="section-title">‚≠ê Favorites</div>
						<div id="favoritesList" class="qa-list"></div>
						<div id="favoritesEmpty" class="favorites-empty">Nothing Favorited Yet</div>
					</div>
					<div class="card">
						<div class="section-title">üìë Bookmarks (demo / in-memory)</div>
						<div class="qa-list" id="bookmarks"></div>
					</div>
					<div class="card">
						<div class="section-title">üß© Side Apps (demo / in-memory)</div>
						<div class="qa-list" id="sideapps"></div>
					</div>
				</aside>

				<!-- Main file list -->
				<section class="fileview">
					<table>
						<thead>
							<tr>
								<th style="width:52%">Name</th>
								<th style="width:15%">Size</th>
								<th style="width:15%">Type</th>
								<th style="width:18%">Date Modified</th>
							</tr>
						</thead>
						<tbody id="rows"></tbody>
					</table>
				</section>
			</div>

		<div class="footer">
			<p>Tip: To publish this page via GitHub Pages, enable Pages in your repo settings and select the branch/folder that contains this <code>index.html</code>.</p>
		</div>
	</div>

	<script>
		// -------- Demo dataset (no saving) --------
		const now = new Date();
		const gb = 1024**3;
			const sampleFS = {
			path: "/",
			type: "Folder",
			mtime: now,
			children: [
					{ name: "Desktop", type: "Folder", mtime: daysAgo(6), children: [
						{ name: "continue_working.txt", type:"File", size: 2, mtime: daysAgo(40) },
						{ name: "notes.log", type:"File", size: 2200, mtime: daysAgo(40) }
					]},
					{ name: "Documents", type: "Folder", mtime: daysAgo(3), children: [
					{ name: "Resume.docx", type:"File", size: 256*1024, mtime: daysAgo(10) },
					{ name: "Budget.xlsx", type:"File", size: 3.2*1024*1024, mtime: daysAgo(12) },
				]},
					{ name: "Downloads", type: "Folder", mtime: daysAgo(2), children: [
						{ name: "installer.msi", type:"File", size: 1017*1024*1024, mtime: daysAgo(2) }
					]},
					{ name: "Pictures", type: "Folder", mtime: daysAgo(8), children: [
						{ name: "holiday.jpg", type:"File", size: 8.37*1024*1024, mtime: daysAgo(8) }
					]},
				{ name: "Videos", type: "Folder", mtime: daysAgo(1), children: [
					{ name: "trip.mp4", type:"File", size: 7.8*gb, mtime: daysAgo(2) },
					{ name: "event.mov", type:"File", size: 52*gb, mtime: daysAgo(2) }, // 50+ GB band
				]},
				{ name: "BigData", type: "Folder", mtime: daysAgo(2), children: [
					{ name: "dataset.bin", type:"File", size: 120*gb, mtime: daysAgo(2) }, // 100+ GB band
				]},
					{ name: "Music", type: "Folder", mtime: daysAgo(1), children: [
						{ name: "track.flac", type:"File", size: 111*1024*1024, mtime: daysAgo(4) }
					]},
				{ name: "setup.exe", type: "File", size: 310*1024*1024, mtime: daysAgo(5) },
				{ name: "photo.png", type: "File", size: 3.1*1024*1024, mtime: daysAgo(8) }
			]
		};

		function daysAgo(n){ const d=new Date(); d.setDate(d.getDate()-n); return d; }

		// In-memory demo state
		let cwd = sampleFS; // current folder node
		let bookmarks = [];
		let sideapps = [];
		let historyStack = [];
		const folderSizeCache = new Map();

		// -------- Size formatting & banding (mirrors app rules) --------
		function humanSize(bytes){
			if (bytes == null) return "‚Äì";
			if (bytes < 1024) return `${Math.trunc(bytes)} B`;
			const units = ["KB","MB","GB","TB","PB"]; let s=bytes/1024; let i=0;
			while (s >= 1024 && i < units.length-1) { s/=1024; i++; }
			if (s < 10) return `${s.toFixed(2)} ${units[i]}`;
			if (s < 100) return `${s.toFixed(1)} ${units[i]}`;
			return `${s.toFixed(0)} ${units[i]}`;
		}
		function bandLabel(bytes){
			if (bytes >= 100*gb) return "100+ GB";
			if (bytes >= 50*gb) return "50+ GB";
			if (bytes >= 25*gb) return "25+ GB";
			return "";
		}
		function displaySize(bytes){
			if (bytes < 25*gb) return humanSize(bytes);
			return bandLabel(bytes);
		}

		// -------- Folder size (demo async + cache) --------
		function computeFolderSize(node){
			// Simulate async compute and cache
			if (folderSizeCache.has(node)) return Promise.resolve(folderSizeCache.get(node));
			return new Promise(resolve => {
				setTimeout(() => {
					const total = sumFolder(node);
					folderSizeCache.set(node, total);
					resolve(total);
				}, 200); // small delay to show "‚Ä¶"
			});
		}
		function sumFolder(node){
			if (!node.children) return 0;
			let total = 0;
			for (const ch of node.children){
				if (ch.type === "File") total += Math.trunc(ch.size || 0);
				else total += sumFolder(ch);
			}
			return total;
		}

		// -------- Rendering --------
		const rowsEl = document.getElementById('rows');
		const addressEl = document.getElementById('address');
		const searchEl = document.getElementById('search');
		const bookmarksEl = document.getElementById('bookmarks');
		const sideappsEl = document.getElementById('sideapps');
		const favoritesListEl = document.getElementById('favoritesList');
		const favoritesEmptyEl = document.getElementById('favoritesEmpty');

		function pathOf(node){
			const parts=[]; let cur=node; while (cur && cur!==sampleFS){ parts.unshift(cur.name); cur=cur.parent; }
			return '/' + parts.join('/');
		}
		function setParents(node){
			if (!node.children) return;
			for (const ch of node.children){ ch.parent = node; if (ch.type === 'Folder') setParents(ch); }
		}
		setParents(sampleFS);

		function render(){
			addressEl.value = pathOf(cwd) || '/';
			const filter = (searchEl.value || '').toLowerCase();
			const children = (cwd.children||[]).filter(ch => ch.name.toLowerCase().includes(filter));
			rowsEl.innerHTML = '';
			for (const item of children){
				const tr = document.createElement('tr');
				// Name
				const nameTd = document.createElement('td');
				nameTd.className = 'name';
						const nameLink = document.createElement('a');
						nameLink.href = '#';
						const icon = document.createElement('span'); icon.className='icon'; icon.textContent = item.type==='Folder'?'üìÅ':'üìÑ';
						const label = document.createElement('span'); label.textContent = item.name;
						nameLink.append(icon, label);
				nameLink.addEventListener('click', (e)=>{ e.preventDefault(); if(item.type==='Folder'){ historyStack.push(cwd); cwd=item; render(); }});
				const addBtns = document.createElement('span');
				addBtns.innerHTML = `
					<button class="pill" title="Add to Bookmarks">‚≠ê</button>
					<button class="pill" title="Add to Side Apps">üß©</button>
					${item.type==='File' ? '<button class="pill" title="Run (demo)">‚ñ∂Ô∏è</button>' : ''}
				`;
				addBtns.querySelectorAll('button')[0].onclick = ()=>{ bookmarks.push(item); renderSideLists(); };
				addBtns.querySelectorAll('button')[1].onclick = ()=>{ sideapps.push(item); renderSideLists(); };
				if (item.type==='File') addBtns.querySelectorAll('button')[2].onclick = ()=>{ alert(`Demo: Would run ${item.name}`); };
				nameTd.append(nameLink, addBtns);
				tr.appendChild(nameTd);
				// Size
				const sizeTd = document.createElement('td');
				sizeTd.title = '‚Äî';
				if (item.type === 'File'){
					sizeTd.textContent = displaySize(Math.trunc(item.size||0));
					sizeTd.title = `Exact size: ${Math.trunc(item.size||0).toLocaleString()} bytes\n(${humanSize(Math.trunc(item.size||0))})` + (bandLabel(item.size) ? `\nBand: ${bandLabel(item.size)}` : '');
					if (bandLabel(item.size)) sizeTd.classList.add('band');
				} else {
					sizeTd.textContent = '‚Ä¶';
					sizeTd.title = 'Computing folder size‚Ä¶';
					computeFolderSize(item).then(total=>{
						sizeTd.textContent = displaySize(total);
						sizeTd.title = `Exact size: ${total.toLocaleString()} bytes\n(${humanSize(total)})` + (bandLabel(total) ? `\nBand: ${bandLabel(total)}` : '');
						if (bandLabel(total)) sizeTd.classList.add('band');
					});
				}
				tr.appendChild(sizeTd);
				// Type
				const typeTd = document.createElement('td'); typeTd.textContent = item.type === 'Folder' ? 'Folder' : fileTypeFromName(item.name);
				tr.appendChild(typeTd);
				// Date Modified
				const dtTd = document.createElement('td'); dtTd.textContent = fmtDate(item.mtime); tr.appendChild(dtTd);
				rowsEl.appendChild(tr);
			}
		}

		function fmtDate(d){ const dd=new Date(d); return dd.toLocaleString(); }
		function fileTypeFromName(name){
			const lower = name.toLowerCase();
			if (lower.endsWith('.exe')) return 'Executable';
			if (lower.endsWith('.mp4')||lower.endsWith('.mov')) return 'Video';
			if (lower.endsWith('.png')||lower.endsWith('.jpg')||lower.endsWith('.jpeg')) return 'Image';
			if (lower.endsWith('.xlsx')||lower.endsWith('.csv')) return 'Spreadsheet';
			if (lower.endsWith('.doc')||lower.endsWith('.docx')||lower.endsWith('.rtf')) return 'Document';
			return 'File';
		}

			function renderSideLists(){
				bookmarksEl.innerHTML = bookmarks.map((b,i)=>`<button class="pill" title="Remove" onclick="removeBookmark(${i})">‚≠ê ${b.name}<span> √ó</span></button>`).join('') || '<div class="muted">(none)</div>';
				sideappsEl.innerHTML = sideapps.map((s,i)=>`<button class="pill" title="Remove" onclick="removeSideApp(${i})">üß© ${s.name}<span> √ó</span></button>`).join('') || '<div class="muted">(none)</div>';
				const favsHtml = favorites.map((f,i)=>`<div class="qa-item" title="Remove" onclick="removeFavorite(${i})">‚≠ê ${f.name}<span style="margin-left:auto;opacity:.6;">√ó</span></div>`).join('');
				favoritesListEl.innerHTML = favsHtml;
				favoritesEmptyEl.style.display = favorites.length ? 'none' : 'block';
			}
		window.removeBookmark = (i)=>{ bookmarks.splice(i,1); renderSideLists(); }
		window.removeSideApp = (i)=>{ sideapps.splice(i,1); renderSideLists(); }
			window.removeFavorite = (i)=>{ favorites.splice(i,1); renderSideLists(); }

		// -------- Navigation & events --------
			document.getElementById('backBtn').onclick = ()=>{ if (historyStack.length){ cwd = historyStack.pop(); render(); } };
			document.getElementById('forwardBtn').onclick = ()=>{ alert('Demo: Forward history not implemented'); };
		document.getElementById('upBtn').onclick = ()=>{ if (cwd.parent){ historyStack.push(cwd); cwd = cwd.parent; render(); } };
		document.getElementById('refreshBtn').onclick = ()=>{ render(); };
		addressEl.addEventListener('change', ()=>{ /* demo: address is read-only visual */ render(); });
		searchEl.addEventListener('input', ()=> render());

			// Favorites demo wiring
			const favorites = [];
			document.getElementById('favBtn').onclick = ()=>{
				const sel = (cwd.children||[])[0];
				if (!sel) return alert('Demo: no item to favorite in this folder');
				favorites.push({ name: sel.name, node: sel });
				renderSideLists();
			};
			document.getElementById('newFolder').onclick = ()=> alert('Demo: New Folder (no save)');
			document.getElementById('copyBtn').onclick = ()=> alert('Demo: Copy');
			document.getElementById('cutBtn').onclick = ()=> alert('Demo: Cut');
			document.getElementById('pasteBtn').onclick = ()=> alert('Demo: Paste');
			document.getElementById('renameBtn').onclick = ()=> alert('Demo: Rename');
			document.getElementById('deleteBtn').onclick = ()=> alert('Demo: Delete');

			// Quick Access navigation
			document.querySelectorAll('.qa-item').forEach(el=>{
				el.addEventListener('click', ()=>{
					const t = el.getAttribute('data-target');
					if (t==='Bookmarks' || t==='SideApps') return; // demo lists on sidebar only
					const target = (sampleFS.children||[]).find(ch=>ch.name===t);
					if (target){ historyStack.push(cwd); cwd = target; render(); }
				});
			});

		render();
		renderSideLists();
	</script>
</body>
</html>
